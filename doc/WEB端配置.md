
# Web配置参数

## 1. 登录DTU管理系统，确认模块归属

参考[链接说明](https://doc.openluat.com/wiki/21?wiki_page_id=2601)

DTU管理网站: [https://dtu.openluat.com](https://dtu.openluat.com)

## 2. 基本参数

### 2.1 模式

| 参数 | 描述 | 备注 |
| ---- | ---- | ---- |
| 透传 | 数据透明通信 | 模块接收数据后，无回复  |
| 单片机控制 |  单片机通过串口给模块发送数据时，有固定格式"send,id,data" ，发送成功后，模块返回 SEND_OK  |  又称为非透传模式或多通道通讯

### 2.2 报文转换（bin -- hex）

| 参数 | 描述                                                    | 备注                                       |
| ---- | ------------------------------------------------------- | ------------------------------------------ |
| 转换 | 模块将接收到的二进制原始数据先转成hex格式，再发给服务器      | 取决于服务器接收和处理数据的能力              |
| 不换 |             \                                           | 如果启用数据流模板，选择"不换"；一般无需转换 |

### 2.3 首次登陆服务器发送注册信息

| 参数                                             | 描述                                                    | 备注                                       |
| ------------------------------------------------ | ------------------------------------------------------- | ------------------------------------------ |
| 发送{csq:rssi,imei:imei,iccid:iccid,ver:Version} | 发送模块的当前部分信息(例如CSQ,RSSI,IMEI等)                           | 取决于服 务器接收和处理数据的能力          |
| 发送HEX报文"13,12345,12345"                      | 发送16进制报文                                                       | 如果启用数据流模板，选择“不换；一般无需转换 |
| 不发                                             | 登录后不发任何信息给服务器 | 取决于服 务器接收和处理数据的能力          |
| 自定义                                           | 登录后发送用户自定义数据给服务器 | 取决于服 务器接收和处理数据的能力          |
| 顺序生成                                         |  | 取决于服 务器接收和处理数据的能力          |

### 2.4 参数版本号

| 参数 | 描述 | 备注 |
| --- | --- | --- |
| \ | 范围是1~n，正整数| 版本号会自动更新，也可以停留在某个DTU版本，默认1|

### 2.5 每分钟最大串口流量(Byte)

| 参数 | 描述 | 备注 |
| --- | --- | --- |
| 启动| 限制模块端，每分钟的串口流量| 避免设备通信异常或发生故障时，出现流量爆表情况 |
| 不启动| \ | 也可以填0不启动|

### 2.6 是否启用自动更新

| 参数 | 描述 |备注 |
| --- | --- |--- |
| 是|开启模块远程自动更新固件功能 |  |
| 否| 关闭模块远程自动更新固件功能 |  考虑到产品稳定性，可选否 |

### 2.7 串口分帧超时

| 参数 | 描述 | 备注 |
| --- | --- | --- |
| \ | 下面的采集设备有时上传数据速度较慢，你若不想数据被分包，可以设置一个分帧超时时间| 超过这个时间剩下的数据会被分包发送|

### 2.8 电源模式

| 参数 | 描述 |
| --- | --- |
| 正常模式|  pm.wake模式|
| 省电模式|  自动休眠 |

### 2.9 配置密码

| 参数 | 描述 | 备注 |
| --- | --- | --- |
| \ | 用户如果通过串口配置密码这一参数后，忘记了密码，可在dtu页面这里重新配置密码| 只允许包含字母数字_ |

### 2.10 网络分帧超时

| 参数 | 描述 | 备注 |
| --- | --- | --- |
| \ | 同串口分帧超时| 默认 0 |

### 2.11 日志输出

| 参数 | 描述 | 备注 |
| --- | --- | --- |
| 开启| 相应的参数更新| 网络信息以及涉及的云平台信息都会打印输出|
| 关闭| \ | \ |

## 3.串口参数

| 参数 | 描述 | 备注 |
| --- | --- | --- |
| 串口  | 平台启用的串口和模块硬件串口一 一对应，选择一个点击启用即可|    |
| 波特率| 用串口工具连接TCP，或者与云平台通信时也要配置与之相同的波特率。| |
| 数据位| 默认八个数据位|单位bps |
| 校验位| 默认无校验位|  |
| 停止位| 默认一个停止位| |
| 485DIR| 485是半双工的通讯模式，通信两端都可以进行数据收发，但是同一时刻只能一方发送数据一方接收数据，何时发送与接收是要有个信号来驱使的，如果选了一个pio为485通信模式，则就是用一个gpio来控制，GPIO_X给个高电平，就收，GPIO_X变成低电平就发| 485方向控制GPIO|

## 4.网络通道参数

### 4.1 通道类型

| 参数   | 描述                 | 备注                                     |
| ------ | -------------------- | ---------------------------------------- |
| 通道   | 通道可理解为socket连接| 最多支持7个通道，可任选一个通道启用，默认不启用 |
| HTTP   | HTTP连接请求         | 目前支持post，get两种请求方式            |
| SOCKET | socket连接           | 支持tcp，udp连接                         |
| MQTT   | mqtt连接             | 物联网常用传输协议                       |
| OneNET | 中国移动旗下的云平台 | 支持DTU协议，MQTT协议，MOBUS协议连接     |
| 阿里云 | 阿里巴巴旗下云平台   | 支持自动注册，一型一密注册，一机一密注册 |
| 百度云 | 百度旗下的云平台     |                                          |
| 腾讯云 | 腾讯旗下的云平台     |                                          |

### 4.2 HTTP

#### 4.2.1 HTTP绑定串口ID

| 参数 | 描述   | 备注           |
| ---- | ------ | -------------- |
| 1    | 串口一 | 对应模块的串口一 |
| 2    | 串口二 | 对应模块的串口二 |

#### 4.2.2 method

| 参数 | 描述     | 备注                           |
| ---- | -------- | ------------------------------ |
| get  | 请求方法 | 向特定的资源发出请求           |
| post | 请求方法 | 向指定资源提交数据进行处理请求 |

#### 4.2.3 url

| 参数 | 描述     | 备注 |
| ---- | -------- | ---- |
| url  | 资源路径 | \    |

#### 4.2.4 timeout

| 参数    | 描述             | 备注 |
| ------- | ---------------- | ---- |
| timeout | 请求最长等待时间，单位MS | \    |

#### 4.2.5请求类型

| 参数  | 描述           | 备注 |
| ----- | -------------- | ---- |
| body  | 请求体中的数据 | 串口数据类型，默认body |
| param | 请求的参数     | \    |

#### 4.2.6 type

| 参数      | 描述                 | 备注 |
| --------- | -------------------- | ---- |
| urlencode | body提交格式为encode | \    |
| json      | body提交格式为json   | \    |
| stream    | body提交格式为二进制 | \    |

#### 4.2.7 basic

| 参数  | 描述                                                         | 备注                                        |
| ----- | ------------------------------------------------------------ | ------------------------------------------- |
| basic | Basic认证方式，客户端通过明文（Base64编码格式）传输用户名和密码到服务端进行认证 | HTTP的BASIC验证，注意账号密码之间用 ： 连接 |

#### 4.2.8 head

| 参数 | 描述       | 备注 |
| ---- | ---------- | ---- |
| head | http请求头 | \    |

#### 4.2.9 返回数据过滤

| 参数 | 描述               | 备注 |
| ---- | ------------------ | ---- |
| code | 服务器返回状态码   | 勾选该项通过串口可以看到http服务器返回状态码    |
| head | 服务器返回http头   | 勾选该项通过串口可以看到http服务器返回http头   |
| body | 服务器返回httpbody | 勾选该项通过串口可以看到http服务器返回httpbody    |

### 4.3 SOCKET

#### 4.3.1 协议

| 参数    | 描述    | 备注 |
| ------- | ------- | ---- |
| TCP协议 | TCP连接 | \    |
| UDP协议 | UDP连接 | \    |

#### 4.3.2 心跳包

| 参数     | 描述                                              | 备注                                       |
| -------- | ------------------------------------------------- | ------------------------------------------ |
| 自定义   | 用户自定义的心跳包,只支持数字和字母,建议2-4个字节 | \                                          |
| 顺序生成 | 前缀后缀自行定义，中间值为0001（固定0001）        | 中间值0001不能在平台上改，只能在代码中更改 |

#### 4.3.3 心跳间隔时间

| 参数         | 描述             | 备注 |
| ------------ | ---------------- | ---- |
| 心跳间隔时间 | 心跳包的间隔时间，单位秒 | 0为关闭心跳包，建议60-300  |

#### 4.3.4 socket的地址或域名

| 参数               | 描述                   | 备注 |
| ------------------ | ---------------------- | ---- |
| socket的地址或域名 | 服务器的IP地址或者域名 | \    |

#### 4.3.5 socket服务器的端口号

| 参数                 | 描述               | 备注 |
| -------------------- | ------------------ | ---- |
| socket服务器的端口号 | 连接服务器的端口号 | \    |

#### 4.3.6 TCP通道捆绑的串口ID

| 参数 | 描述   | 备注 |
| ---- | ------ | ---- |
| 1    | 串口一 | \    |
| 2    | 串口二 | \    |

#### 4.3.7 被动上报间隔

| 参数         | 描述                 | 备注                                |
| ------------ | -------------------- | ----------------------------------- |
| 被动上报间隔 | 间隔多久上报一次报文 | 单位秒，范围：1~65535，间隔时间是被动上报间隔+被动采集间隔，非被动模式为空|

#### 4.3.8 被动采集间隔

| 参数         | 描述                         | 备注 |
| ------------ | ---------------------------- | ---- |
| 被动采集间隔 | 采集设置时间内上报的所有数据 | \    |

#### 4.3.9 自动任务间隔时间

| 参数             | 描述                                                         | 备注 |
| ---------------- | ------------------------------------------------------------ | ---- |
| 自动任务间隔时间 | 预置信息模块内，自动采集任务中所有指令的发送时间间隔，单位为秒 | \    |

#### 4.3.10 SSL

| 参数   | 描述          | 备注 |
| ------ | ------------- | ---- |
| 启用   | 启用SSL加密   | \    |
| 不启用 | 不启用SSL加密 | \    |

### 4.4 MQTT

#### 4.4.1 MQTT心跳包的间隔

| 参数             | 描述                       | 备注 |
| ---------------- | -------------------------- | ---- |
| MQTT心跳包的间隔 | 设置发送心跳包的间隔时间 |单位秒,默认300   |

#### 4.4.2 自动任务间隔时间

| 参数             | 描述                                             | 备注 |
| ---------------- | ------------------------------------------------ | ---- |
| 自动任务间隔时间 | 预置信息模块内，自动采集任务中所有指令的发送时间间隔 | 单位秒,默认1800 范围：60~3600   |

#### 4.4.3 MQTT的地址或域名

| 参数             | 描述           | 备注 |
| ---------------- | -------------- | ---- |
| MQTT的地址或域名 | IP地址或者域名 | \    |

#### 4.4.4 MQTT服务器的端口号

| 参数               | 描述               | 备注 |
| ------------------ | ------------------ | ---- |
| MQTT服务器的端口号 | 连接服务器的端口号 | \    |

#### 4.4.5 MQTT的登陆账号

| 参数           | 描述             | 备注   |
| -------------- | ---------------- | ------ |
| MQTT的登陆账号 | 登录mqtt服务器id | 可不填 |

#### 4.4.6 MQTT的登陆密码

| 参数           | 描述               | 备注   |
| -------------- | ------------------ | ------ |
| MQTT的登陆密码 | 登录mqtt服务器密码 | 可不填 |

#### 4.4.7 MQTT保存会话标志位

| 参数         | 描述               | 备注 |
| ------------ | ------------------ | ---- |
| 持久会话     | 不清除会话，接收上次断开服务器后未收到的消息 | \    |
| 离线自动销毁 |  清除会话，重新建立连接  | \    |

#### 4.4.8 订阅消息主题

| 参数         | 描述         | 备注             |
| ------------ | ------------ | ---------------- |
| 订阅消息主题 | 设备订阅主题 | 可订阅一个或多个多个需要按照" /company/device;0;/company/imcp;1;/company/test;2"的格式来写，
 |

#### 4.4.9 发布消息主题

| 参数         | 描述             | 备注             |
| ------------ | ---------------- | ---------------- |
| 发布消息主题 | 设备发布消息主题 | 可发布一个或多个,多个需要按照"/company/service;0;/company/imcp;1;/company/service;2"的格式来写 |

#### 4.4.10 MQTT的QOS级别

| 参数 | 描述       | 备注 |
| ---- | ---------- | ---- |
| 0    | 只发一次   | \    |
| 1    | 至少收一次 | \    |
| 2    | 只收到一次 | \    |

#### 4.4.11 MQTT的publish参数retain

| 参数 | 描述             | 备注 |
| ---- | 当我们使用MQTT客户端发布消息（PUBLISH）时，如果将RETAIN标志位设置为true，那么MQTT服务器会将最近收到的一条RETAIN标志位为true的消息保存在服务器端（内存或文件） | ---- |
| 0    | 不储存消息       | \    |
| 1    | 储存最后一条消息 | \    |

#### 4.4.12 MQTT通道捆绑的串口ID

| 参数 | 描述   | 备注 |
| ---- | ------ | ---- |
| 1    | 串口一 | \    |
| 2    | 串口二 | \    |
| 3    | 串口三 | \    |

#### 4.4.13 客户端ID

| 参数     | 描述                       | 备注 |
| -------- | -------------------------- | ---- |
| 客户端ID | 可以自行设置，默认模块imei | \    |

#### 4.4.14 主题添加IMEI

| 参数 | 描述       | 备注 |
| ---- | ---------- | ---- |
| 是   | 添加imei   | 默认添加（/自定义主题/IMEI）|
| 否   | 不添加imei | \    |

#### 4.4.15 transport

| 参数    | 描述         | 备注 |
| ------- | ------------ | ---- |
| tcp     | 仅tcp传输    | \    |
| tcp_ssl | 带ssltcp传输 | \    |

#### 4.4.16 MQTT的遗嘱

| 参数       | 描述                     | 备注 |
| ---------- | ------------------------ | ---- |
| MQTT的遗嘱 | mqtt异常断开时模块发布的消息 | \    |

### 4.5 OneNET

### 协议

| 参数       | 描述                                               | 备注                                                         |
| ---------- | -------------------------------------------------- | ------------------------------------------------------------ |
| DTU协议    | 以tcp为连接协议，可以自行定义传输数据模板          | \                                                            |
| MQTT协议   | 以mqtt为连接协议，且部分mqtt协议规范为平台定义格式 | 详细参考开发文档：[文档与工具_开发者文档_OneNET (10086.cn)](https://open.iot.10086.cn/doc/multiprotocol/book/develop/mqtt/device/doc-tool.html) |
| MODBUS协议 | 以tcp连接协议，以modbus为应用层协议                | 详细参考开发文档：[文档与工具_开发者文档_OneNET (10086.cn)](https://open.iot.10086.cn/doc/multiprotocol/book/develop/modbus/device/doc-tool.html) |

#### 4.5.1 DTU协议

#### 4.5.1.1 心跳包

| 参数     | 描述                                              | 备注                                       |
| -------- | ------------------------------------------------- | ------------------------------------------ |
| 自定义   | 用户自定义的心跳包,只支持数字和字母,建议2-4个字节 | \                                          |
| 顺序生成 | 前缀后缀自行定义，中间值为0001（固定0001）        | 中间值0001不能在平台上改，只能在代码中更改 |

#### 4.5.1.2 链接保活时间

| 参数         | 描述           | 备注 |
| ------------ | -------------- | ---- |
| 链接保活时间 | 心跳包间隔时间 | 单位为s，默认为300s，范围60-1800    |

#### 4.5.1.3 onenet 的地址或域名

| 参数               | 描述                 | 备注                       |
| ------------------ | -------------------- | -------------------------- |
| onenet的地址或域名 | onenet平台连接的地址 | 默认地址(183.230.40.40)已给出，不需要更改 |

#### 4.5.1.4 onenet 服务器的端口号

| 参数                 | 描述                   | 备注                         |
| -------------------- | ---------------------- | ---------------------------- |
| onenet服务器的端口号 | onenet平台连接的端口号 | 默认端口号已给出(1811)，不需要更改 |

#### 4.5.1.5 正式生产环境注册码

| 参数               | 描述                                   | 备注 |
| ------------------ | -------------------------------------- | ---- |
| 正式生产环境注册码 | onenet多协议接入设备列表中的设备注册码 | \    |

#### 4.5.1.6 产品ID

| 参数   | 描述                 | 备注 |
| ------ | -------------------- | ---- |
| 产品ID | 产品概况里面的产品ID | \    |

#### 4.5.1.7 解析脚本名称

| 参数         | 描述           | 备注 |
| ------------ | -------------- | ---- |
| 解析脚本名称 | 数据流模板名称 | \    |

#### 4.5.1.8 串口通道

| 参数 | 描述   | 备注 |
| ---- | ------ | ---- |
| 1    | 串口一 | \    |
| 2    | 串口二 | \    |

#### 4.5.2 MQTT协议

#### 4.5.2.1 链接保活时间

| 参数         | 描述           | 备注 |
| ------------ | -------------- | ---- |
| 链接保活时间 | 心跳包间隔时间 | \    |

#### 4.5.2.2 自动任务间隔

| 参数         | 描述                                 | 备注 |
| ------------ | ------------------------------------ | ---- |
| 自动任务间隔 | 预置信息内的自动采集任务执行时间间隔 | \    |

#### 4.5.2.3 onenet的地址或域名

| 参数               | 描述                 | 备注                       |
| ------------------ | -------------------- | -------------------------- |
| onenet的地址或域名 | onenet平台连接的地址 | 默认地址已给出，不需要更改 |

#### 4.5.2.4 onenet服务器的端口号

| 参数                 | 描述                   | 备注                         |
| -------------------- | ---------------------- | ---------------------------- |
| onenet服务器的端口号 | onenet平台连接的端口号 | 默认端口号已给出，不需要更改 |

#### 4.5.2.5 正式生产环境注册码

| 参数               | 描述                                   | 备注 |
| ------------------ | -------------------------------------- | ---- |
| 正式生产环境注册码 | onenet多协议接入设备列表中的设备注册码 | \    |

#### 4.5.2.6 产品ID

| 参数   | 描述                 | 备注 |
| ------ | -------------------- | ---- |
| 产品ID | 产品概况里面的产品ID | \    |

#### 4.5.2.7 数据格式

| 参数 | 描述                | 备注 |
| ---- | ------------------- | ---- |
| 1    | onenet数据上报格式1 | JSON格式1字符串，默认为该格式    |
| 3    | onenet数据上报格式3 | JSON格式2字符串    |
| 4    | onenet数据上报格式4 | JSON格式3字符串   |

关于该参数的**详细参考**可以参考[文档与工具_开发者文档_OneNET (10086.cn)](https://open.iot.10086.cn/doc/multiprotocol/book/develop/mqtt/device/doc-tool.html)（《设备终端接入协议-MQTT》一文中，5.2.1 数据点上报）

#### 4.5.2.8 MQTT保存会话标志位

| 参数         | 描述                                         | 备注 |
| ------------ | -------------------------------------------- | ---- |
| 持久会话     | 不清除会话，接收上次断开服务器后未收到的消息 | \    |
| 离线自动销毁 | 清除会话，重新建立连接                       | \    |

#### 4.5.2.9 MQTT的QOS级别

| 参数 | 描述       | 备注 |
| ---- | ---------- | ---- |
| 0    | 只发一次   | \    |
| 1    | 至少收一次 | \    |
| 2    | 只收到一次 | \    |

#### 4.5.2.10 MQTT的publish参数retain
  
注：当我们使用MQTT客户端发布消息（PUBLISH）时，如果将RETAIN标志位设置为true，那么MQTT服务器会将最近收到的一条RETAIN标志位为true的消息保存在服务器端（内存或文件）
| 参数 | 描述             | 备注 |
| ---- | ---------------- | ---- |
| 0    | 不储存消息       | \    |
| 1    | 储存最后一条消息 | \    |

### 4.5.2.11 MQTT通道捆绑的串口ID

| 参数 | 描述   | 备注 |
| ---- | ------ | ---- |
| 1    | 串口一 | \    |
| 2    | 串口二 | \    |
| 3    | 串口三 | \    |

#### 4.5.3 MODBUS 协议

#### 4.5.3.1 链接保活时间

| 参数         | 描述           | 备注 |
| ------------ | -------------- | ---- |
| 链接保活时间 | 心跳包间隔时间 | \    |

#### 4.5.3.2 Master-APIkey

| 参数          | 描述                      | 备注 |
| ------------- | ------------------------- | ---- |
| Master-APIkey | 产品概况里的Master-APIkey | \    |

#### 4.5.3.3 产品ID

| 参数   | 描述               | 备注 |
| ------ | ------------------ | ---- |
| 产品ID | 产品概况里的产品ID | \    |

#### 4.5.3.4 串口通道

| 参数 | 描述   | 备注 |
| ---- | ------ | ---- |
| 1    | 串口一 | \    |
| 2    | 串口二 | \    |

## 4.6 阿里云

### 注册类型

一机一密需要项目的**ProductKey**，**DeviceSecret**还有设备的**ID**（默认为设备的IMEI，也就是**DeviceName**）

一型一密不需要设备的**DeviceName**

自动注册需要设备的**AccessKey ID**和**Access Key Secret**

| 参数     | 描述                     | 备注 |
| -------- | ------------------------ | ---- |
| 自动注册 | 自动在对应产品下注册设备 | \    |
| 一型一密 | 在对应产品下注册设备     | \    |
| 一机一密 | 激活注册的对应设备       | \    |

### 4.6.1 自动注册

#### 4.6.1.1 链接保活时间

| 参数         | 描述           | 备注 |
| ------------ | -------------- | ---- |
| 链接保活时间 | 心跳包间隔时间 | \    |

#### 4.6.1.2 自动任务间隔

| 参数         | 描述                                 | 备注 |
| ------------ | ------------------------------------ | ---- |
| 自动任务间隔 | 预置信息内的自动采集任务执行时间间隔 | \    |

#### 4.6.1.3 地域代码(RegionID)

| 参数               | 描述                       | 备注                                                         |
| ------------------ | -------------------------- | ------------------------------------------------------------ |
| 地域代码(RegionID) | 物联网平台设备所在地域代码 | 详细：[地域和可用区 (aliyun.com)](https://help.aliyun.com/document_detail/40654.htm?spm=a2c4g.11186623.0.0.7f701017cqCJHI#concept-2459516) |

#### 4.6.1.4 ProductKey

| 参数       | 描述    | 备注 |
| ---------- | ------- | ---- |
| ProductKey | 产品key | \    |

#### 4.6.1.5 AccessKey ID

| 参数         | 描述 | 备注 |
| ------------ | ---- | ---- |
| AccessKey ID | 秘钥 | \    |

#### 4.6.1.6 Access Key Secret

| 参数              | 描述 | 备注 |
| ----------------- | ---- | ---- |
| Access Key Secret | 密码 | \    |

#### 4.6.1.7 产品版本类型

| 参数   | 描述 | 备注 |
| ------ | ---- | ---- |
| 基础版 | \    | \    |
| 高级版 | \    | \    |

**注意：**阿里云已取消高级版和基础版，两者没有区别，新项目下，实际应用时此参数无效，旧项目下用户根据实际需求自行选择。

### 4.6.8 MQTT保存会话标志位

#### 4.6.1.8 MQTT保存会话标志位

| 参数         | 描述                                         | 备注 |
| ------------ | -------------------------------------------- | ---- |
| 持久会话     | 不清除会话，接收上次断开服务器后未收到的消息 | \    |
| 离线自动销毁 | 清除会话，重新建立连接                       | \    |

#### 4.6.1.9 MQTT的QOS级别

| 参数 | 描述       | 备注 |
| ---- | ---------- | ---- |
| 0    | 只发一次   | \    |
| 1    | 至少收一次 | \    |
| 2    | 只收到一次 | \    |

#### 4.6.1.10 MQTT通道捆绑的串口ID

| 参数 | 描述   | 备注 |
| ---- | ------ | ---- |
| 1    | 串口一 | \    |
| 2    | 串口二 | \    |
| 3    | 串口三 | \    |

#### 4.6.1.11 订阅主题

| 参数     | 描述               | 备注 |
| -------- | ------------------ | ---- |
| 订阅主题 | 模块订阅消息的主题 | \    |

详情请参考实例-MQTT

#### 4.6.1.12 发布主题

| 参数     | 描述               | 备注 |
| -------- | ------------------ | ---- |
| 发布主题 | 模块发布消息的主题 | \    |

详情请参考实例-MQTT

### 4.6.2 一型一密

#### 4.6.2.1 链接保活时间

| 参数         | 描述           | 备注 |
| ------------ | -------------- | ---- |
| 链接保活时间 | 心跳包间隔时间 | \    |

#### 4.6.2.2 自动任务间隔

| 参数         | 描述                                 | 备注 |
| ------------ | ------------------------------------ | ---- |
| 自动任务间隔 | 预置信息内的自动采集任务执行时间间隔 | \    |

#### 4.6.2.3地域代码(RegionID)

| 参数               | 描述                       | 备注                                                         |
| ------------------ | -------------------------- | ------------------------------------------------------------ |
| 地域代码(RegionID) | 物联网平台设备所在地域代码 | 详细：[地域和可用区 (aliyun.com)](https://help.aliyun.com/document_detail/40654.htm?spm=a2c4g.11186623.0.0.7f701017cqCJHI#concept-2459516) |

#### 4.6.2.4 ProductKey

| 参数       | 描述    | 备注 |
| ---------- | ------- | ---- |
| ProductKey | 产品key | \    |

#### 4.6.2.5 ProductSecret

| 参数          | 描述       | 备注 |
| ------------- | ---------- | ---- |
| ProductSecret | 产品secret | \    |

#### 4.6.2.6 产品版本类型

| 参数   | 描述 | 备注                                                |
| ------ | ---- | --------------------------------------------------- |
| 基础版 | \    | \                                                   |
| 高级版 | \    | \
**注意：**阿里云已取消高级版和基础版，两者没有区别，新项目下，实际应用时此参数无效，旧项目下用户根据实际需求自行选择。 |

### 4.6.7 MQTT保存会话标志位

#### 4.6.2.7 MQTT保存会话标志位

| 参数         | 描述                                         | 备注 |
| ------------ | -------------------------------------------- | ---- |
| 持久会话     | 不清除会话，接收上次断开服务器后未收到的消息 | \    |
| 离线自动销毁 | 清除会话，重新建立连接                       | \    |

#### 4.6.2.8 MQTT的QOS级别

| 参数 | 描述       | 备注 |
| ---- | ---------- | ---- |
| 0    | 只发一次   | \    |
| 1    | 至少收一次 | \    |
| 2    | 只收到一次 | \    |

#### 4.6.2.9 MQTT通道捆绑的串口ID

| 参数 | 描述   | 备注 |
| ---- | ------ | ---- |
| 1    | 串口一 | \    |
| 2    | 串口二 | \    |
| 3    | 串口三 | \    |

#### 4.6.2.10 订阅主题

| 参数     | 描述               | 备注 |
| -------- | ------------------ | ---- |
| 订阅主题 | 模块订阅消息的主题 | \    |

详情请参考实例-MQTT

#### 4.6.2.11 发布主题

| 参数     | 描述               | 备注 |
| -------- | ------------------ | ---- |
| 发布主题 | 模块发布消息的主题 | \    |

详情请参考实例-MQTT

### 4.6.3 一机一密

#### 4.6.3.1 链接保活时间

| 参数         | 描述           | 备注 |
| ------------ | -------------- | ---- |
| 链接保活时间 | 心跳包间隔时间 | \    |

#### 4.6.3.2 自动任务间隔

| 参数         | 描述                                 | 备注 |
| ------------ | ------------------------------------ | ---- |
| 自动任务间隔 | 预置信息内的自动采集任务执行时间间隔 | \    |

#### 4.6.3.3 地域代码(RegionID)

| 参数               | 描述                       | 备注                                                         |
| ------------------ | -------------------------- | ------------------------------------------------------------ |
| 地域代码(RegionID) | 物联网平台设备所在地域代码 | 详细：[地域和可用区 (aliyun.com)](https://help.aliyun.com/document_detail/40654.htm?spm=a2c4g.11186623.0.0.7f701017cqCJHI#concept-2459516) |

#### 4.6.3.4 ProductKey

| 参数       | 描述    | 备注 |
| ---------- | ------- | ---- |
| ProductKey | 产品key | \    |

#### 4.6.3.5 DeviceSecret

| 参数         | 描述       | 备注 |
| ------------ | ---------- | ---- |
| DeviceSecret | 设备secret | \    |

#### 4.6.3.6 DeviceName

| 参数       | 描述     | 备注 |
| ---------- | -------- | ---- |
| DeviceName | 设备名称 | \    |

#### 4.6.3.7 产品版本类型

| 参数   | 描述 | 备注 |
| ------ | ---- | ---- |
| 基础版 | \    | \    |
| 高级版 | \    | \    |

阿里云已取消高级版和基础版，两者没有区别，新项目下，实际应用时此参数无效，旧项目下用户根据实际需求自行选择。

#### 4.6.3.8 MQTT保存会话标志位

| 参数         | 描述                                         | 备注 |
| ------------ | -------------------------------------------- | ---- |
| 持久会话     | 不清除会话，接收上次断开服务器后未收到的消息 | \    |
| 离线自动销毁 | 清除会话，重新建立连接                       | \    |

#### 4.6.3.9 MQTT的QOS级别

| 参数 | 描述       | 备注 |
| ---- | ---------- | ---- |
| 0    | 只发一次   | \    |
| 1    | 至少收一次 | \    |
| 2    | 只收到一次 | \    |

#### 4.6.3.10 MQTT    通道捆绑的串口ID

| 参数 | 描述   | 备注 |
| ---- | ------ | ---- |
| 1    | 串口一 | \    |
| 2    | 串口二 | \    |
| 3    | 串口三 | \    |

#### 4.6.3.11 订阅主题

| 参数     | 描述               | 备注 |
| -------- | ------------------ | ---- |
| 订阅主题 | 模块订阅消息的主题 | \    |

详情请参考实例-MQTT

##### 4.6.3.12 发布主题

| 参数     | 描述               | 备注 |
| -------- | ------------------ | ---- |
| 发布主题 | 模块发布消息的主题 | \    |

详情请参考实例-MQTT

### 4.7 百度云

 注册类型

| 参数   | 描述                                      | 备注 |
| ------ | ----------------------------------------- | ---- |
| 数据型 | 百度云自动注册设备+百度云定义mqtt通信协议 | \    |
| 设备型 | 百度云自动注册设备+数据流解析             | \    |

### 4.7.1 数据型

#### 4.7.1.1 链接保活时间

| 参数         | 描述               | 备注 |
| ------------ | ------------------ | ---- |
| 链接保活时间 | 60–1800 只接受数字 | \    |

#### 4.7.1.2 自动任务间隔

| 参数         | 描述                                 | 备注 |
| ------------ | ------------------------------------ | ---- |
| 自动任务间隔 | 预置信息内的自动采集任务执行时间间隔 | \    |

#### 4.7.1.3 地域代码(RegionID)

| 参数               | 描述                                   | 备注   |
| ------------------ | -------------------------------------- | ------ |
| 地域代码(RegionID) | 区域代码（可以选择广州：gz和北京：bj） | 默认gz |

#### 4.7.1.4 Endpoint

| 参数     | 描述     | 备注 |
| -------- | -------- | ---- |
| Endpoint | 项目名称 | \    |

#### 4.7.1.5 AccessKey ID

| 参数         | 描述    | 备注 |
| ------------ | ------- | ---- |
| AccessKey ID | 账号key | \    |

#### 4.7.1.6 Access Key Secret

| 参数              | 描述     | 备注 |
| ----------------- | -------- | ---- |
| Access Key Secret | 账号密匙 | \    |

#### 4.7.1.7 身份名称

| 参数     | 描述           | 备注 |
| -------- | -------------- | ---- |
| 身份名称 | 创建身份的名称 | \    |

#### 4.7.1.8 身份密码

| 参数     | 描述                 | 备注                             |
| -------- | -------------------- | -------------------------------- |
| 身份密码 | 创建身份时生成的密码 | 只有创建是才能看到，不保存会丢失 |

#### 4.7.1.9 订阅主题

| 参数     | 描述               | 备注 |
| -------- | ------------------ | ---- |
| 订阅主题 | 模块订阅消息的主题 | \    |

#### 4.7.1.10 发布主题

| 参数     | 描述               | 备注 |
| -------- | ------------------ | ---- |
| 发布主题 | 模块发布消息的主题 | \    |

#### 4.7.1.11 MQTT保存会话标志位

| 参数         | 描述               | 备注 |
| ------------ | ------------------ | ---- |
| 持久会话     | 下次通信还是相同id | \    |
| 离线自动销毁 | 下次通信id改变     | \    |

#### 4.7.1.12 MQTT的QOS级别

| 参数 | 描述       | 备注 |
| ---- | ---------- | ---- |
| 0    | 只发一次   | \    |
| 1    | 至少收一次 | \    |
| 2    | 只收到一次 | \    |

#### 4.7.1.13 MQTT通道捆绑的串口ID

| 参数 | 描述   | 备注 |
| ---- | ------ | ---- |
| 1    | 串口一 | \    |
| 2    | 串口二 | \    |
| 3    | 串口三 | \    |

#### 4.7.1.14 transport

| 参数    | 描述         | 备注 |
| ------- | ------------ | ---- |
| tcp     | 仅tcp传输    | \    |
| tcp_ssl | 带ssltcp传输 | \    |

#### 4.7.1.15 MQTT的遗嘱

| 参数       | 描述                         | 备注 |
| ---------- | ---------------------------- | ---- |
| MQTT的遗嘱 | mqtt异常断开时模块发布的消息 | \    |

### 4.7.2 设备型

#### 4.7.2.1 链接保活时间

| 参数         | 描述               | 备注 |
| ------------ | ------------------ | ---- |
| 链接保活时间 | 60–1800 只接受数字 | \    |

#### 4.7.2.2 自动任务间隔

| 参数         | 描述                                 | 备注 |
| ------------ | ------------------------------------ | ---- |
| 自动任务间隔 | 预置信息内的自动采集任务执行时间间隔 | \    |

#### 4.7.2.3 地域代码(RegionID)

| 数                 | 描述                                   | 备注   |
| ------------------ | -------------------------------------- | ------ |
| 地域代码(RegionID) | 区域代码（可以选择广州：gz和北京：bj） | 默认gz |

#### 4.7.2.4 schemaID

| 参数     | 描述       | 备注 |
| -------- | ---------- | ---- |
| schemaID | 数据目标id | \    |

#### 4.7.2.6 AccessKey ID

| 参数         | 描述    | 备注 |
| ------------ | ------- | ---- |
| AccessKey ID | 账号key | \    |

#### 4.7.2.7 Access Key Secret

| 参数              | 描述     | 备注 |
| ----------------- | -------- | ---- |
| Access Key Secret | 账号密匙 | \    |

#### 4.7.2.8 MQTT保存会话标志位

| 参数         | 描述               | 备注 |
| ------------ | ------------------ | ---- |
| 持久会话     | 下次通信还是相同id | \    |
| 离线自动销毁 | 下次通信id改变     | \    |

#### 4.7.2.9 MQTT的QOS级别

| 参数 | 描述       | 备注 |
| ---- | ---------- | ---- |
| 0    | 只发一次   | \    |
| 1    | 至少收一次 | \    |
| 2    | 只收到一次 | \    |

#### 4.7.2.10 MQTT通道捆绑的串口ID

| 参数 | 描述   | 备注 |
| ---- | ------ | ---- |
| 1    | 串口一 | \    |
| 2    | 串口二 | \    |
| 3    | 串口三 | \    |

#### 4.7.2.11 transport

| 参数    | 描述         | 备注 |
| ------- | ------------ | ---- |
| tcp     | 仅tcp传输    | \    |
| tcp_ssl | 带ssltcp传输 | \    |

#### 4.7.2.12 MQTT的遗嘱

| 参数       | 描述                         | 备注 |
| ---------- | ---------------------------- | ---- |
| MQTT的遗嘱 | mqtt异常断开时模块发布的消息 | \    |

## 4.8 腾讯云

原有的链接腾讯云版本，注册过程中可能会暴露用户的REST API密匙和账户ID，新版链接方式正在开发中。

## 5.预置信息

### 5.1 远程更新参数和固件

#### 5.1.1 白名单号

| 参数     | 描述     | 备注             |
| -------- | -------- | ---------------- |
| 白名单号 | 电话号码 | 预警电话报警号码，无需加区号 |

#### 5.1.2 振铃延时

注：振铃延迟就是在接听电话前，设备和所有外接电话响铃的次数

| 参数     | 描述                              | 备注  |
| -------- | --------------------------------- | ----- |
| 振铃延时 | 白名单的振铃延时,其他电话立刻挂断 | 1-100 |

#### 5.1.3 短信字段

| 参数     | 描述                                          | 备注 |
| -------- | --------------------------------------------- | ---- |
| 短信字段 | 短信更新参数的预定义**字符串**,默认是"SMS_UPDATE" | 最高一条短信能发送140字节数据(即70个汉字)    |

### 5.2 设置APN

#### 5.2.1 名称

| 参数 | 描述    | 备注            |
| ---- | ------- | --------------- |
| 名称 | APN名称 | GPRS 接入点名称 |

#### 5.2.2 用户名

| 参数   | 描述             | 备注        |
| ------ | ---------------- | ----------- |
| 用户名 | 用户名，没有留空 | GPRS 用户名 |

#### 5.2.3 密码

| 参数 | 描述           | 备注      |
| ---- | -------------- | --------- |
| 密码 | 密码，没有留空 | GPRS 密码 |

### 5.3 自动采集任务

#### 5.3.1 采集等待

| 参数     | 描述               | 备注 |
| -------- | ------------------ | ---- |
| 采集等待 | 每条指令等待的时间 | \    |

详情请参考 实例-自动采集任务

#### 5.3.2 cmd

| 参数 | 描述 | 备注 |
| ---- | ---- | ---- |
| cmd* | 指令 | \    |

详情请参考 实例-自动采集任务

## 6.GPIO


## 7.GPS

### 是否启用功能

| 参数   | 描述             | 备注 |
| ------ | ---------------- | ---- |
| 启用   | 使用   |      |
| 不启用 | 不使用 |      |

### 7.1 硬件设置

#### 7.1.1 GPSLED

| 参数   | 描述                                                      | 备注 |
| ------ | --------------------------------------------------------- | ---- |
| GPSLED | GPS 定位状态指示灯 GPIO 编号，例如 GPIO_3 就填 pio3，下同 | 只要不和其他GPIO重合，用户可参考GPIO列表自行选择    |

#### 7.1.2 震动检测

| 参数     | 描述                       | 备注 |
| -------- | -------------------------- | ---- |
| 震动检测 | 振动传感器信号输入GPIO编号 | \    |

#### 7.1.3 开锁检测

| 参数     | 描述                                                   | 备注 |
| -------- | ------------------------------------------------------ | ---- |
| 开锁检测 | ACC开锁信号输入GPIO编号注意ACC信号电压很高要用分压电阻 | \    |
| 开锁检测 | ACC开锁信号,输入GPIO编号,注意ACC信号电压很高要用分压电阻 | \ |

#### 7.1.4 充电状态检测

| 参数         | 描述                                  | 备注 |
| ------------ | ------------------------------------- | ---- |
| 充电状态检测 | 内置锂电池，充电状态输入GPIO编号,可为空 | \    |

#### 7.1.5 电池电压检测

| 参数         | 描述                 | 备注 |
| ------------ | -------------------- | ---- |
| 电池电压检测 | 检测模块供电电压 | \    |

#### 7.1.6 分压比

| 参数   | 描述                                                 | 备注 |
| ------ | ---------------------------------------------------- | ---- |
| 分压比 | VCC/1.8V + 1的值，是值ADC采集电压和VCC实际电压的比值 | \    |

### 7.2 上报设置

#### 7.2.1 串口ID

| 参数 | 描述   | 备注 |
| ---- | ------ | ---- |
| 1    | 串口一 | \    |
| 2    | 串口二 | \    |
| 3    | 串口三 | \    |

## 7.2 波特率

### 7.2.2 波特率

| 参数   | 描述         | 备注 |
| ------ | ------------ | ---- |
| 波特率 | 传输数据速率 | 默认115200，用户更具实际需要自行选择    |

### 7.2.3 工作模式

| 参数     | 描述                             | 备注       |
| -------- | -------------------------------- | ---------- |
| 正常     | 正常工作                         | \          |
| 低功耗   | gps低功耗工作                    | \          |
| 自动跟踪 | 超低功耗（间隔一段时间启动一次，具体间隔时间由对应的GPS模块决定） | 不建议使用 |

### 7.2.4 采集间隔

| 参数     | 描述            | 备注   |
| -------- | --------------- | ------ |
| 采集间隔 | 采集GPS数据间隔 | 单位秒（530H能设置三种间隔，0.5s一次，1s一次，和不开启） |

### 7.2.5 采集方式

| 参数     | 描述                      | 备注     |
| -------- | ------------------------- | -------- |
| 触发采集 | 设备状态改变就采集GPS数据 | 自行定义 |
| 连续采集 | 一直采集GPS数据,上文的采集间隔就是为该项设置的           | \        |

### 7.2.6 报文格式

| 参数 | 描述     | 备注 |
| ---- | -------- | ---- |
| JSON | JSON格式 | \    |
| HEX  | HEX格式  | \    |

### 7.2.7 报文缓存

| 参数     | 描述                                 | 备注 |
| -------- | ------------------------------------ | ---- |
| 报文缓存 | 缓存对应数量报文，缓存好报文一起发送 | \    |

### 7.2.8 分隔标记

| 参数     | 描述         | 备注 |
| -------- | ------------ | ---- |
| 分隔标记 | 报文分隔标记 | 不支持","间隔    |

### 7.2.9 状态更新

| 参数     | 描述                       | 备注 |
| -------- | -------------------------- | ---- |
| 状态更新 | 设置时间内上报一次设备状态 | 单位：分钟    |

### 7.2.10 上报通道

| 参数     | 描述                | 备注 |
| -------- | ------------------- | ---- |
| 上报通道 | 对应GPS设备使用串口 | 默认空 为自动捆绑GPS串口对应的网络通道    |

## 8.数据流

### 8.1 是否启用功能

| 参数   | 描述             | 备注 |
| ------ | ---------------- | ---- |
| 启用   | 使用数据流功能   | \    |
| 不起用 | 不使用数据流功能 | \    |
| 启用   | 使用数据流功能   |      |
| 不启用 | 不使用数据流功能 |      |

### 8.2 发送数据流模板

| 参数           | 描述                       | 备注 |
| -------------- | -------------------------- | ---- |
| 发送数据流模板 | 自行解析通过串口发送的数据 | \    |

### 8.3 接收数据流模板

| 参数           | 描述                     | 备注 |
| -------------- | ------------------------ | ---- |
| 接收数据流模板 | 自行解析串口接收到的数据 | \    |

## 9.预警

### 9.1 GPIO触发上报

#### 9.1.1 GPIO

| 参数 | 描述     | 备注 |
| ---- | -------- | ---- |
| GPIO | 预警gpio | \    |

#### 9.1.2 触发模式

| 参数   | 描述               | 备注 |
| ------ | ------------------ | ---- |
| 下降沿 | gpio预警下降沿触发 | \    |
| 上升沿 | gpio预警上升沿触发 | \    |

#### 9.1.3 上报消息

| 参数     | 描述                   | 备注 |
| -------- | ---------------------- | ---- |
| 上报消息 | 网络和短信上报所发消息 | 字符串格式    |

详情请参考 实例-预警

#### 9.1.4 上报通道

| 参数     | 描述         | 备注 |
| -------- | ------------ | ---- |
| 上报通道 | 对应网络通道 | \    |

#### 9.1.5 上报方式

| 参数   | 描述                         | 备注 |
| ------ | ---------------------------- | ---- |
| 互联网 | 对应网络通道协议上报         | \    |
| 短信   | 对应预置信息白名单号发送短信 | \    |
| 电话   | 对应预置信息白名单号通话     | \    |

### 9.2 ADC0触发上报

#### 9.2.1 触发模式

| 参数     | 描述             | 备注 |
| -------- | ---------------- | ---- |
| 低于     | 低于多少电压上报 | 单位mv    |
| 高于     | 高于多少电压上报 | 单位mv    |
| 回差电压 | 间隔上次电压值   | 参考 实例-预警，单位mv    |

#### 9.2.2 上报消息

| 参数     | 描述                   | 备注 |
| -------- | ---------------------- | ---- |
| 上报消息 | 网络和短信上报所发消息 | 默认为字符串    |

详情请参考  实例-预警

#### 9.2.3 上报通道

| 参数     | 描述         | 备注 |
| -------- | ------------ | ---- |
| 上报通道 | 对应网络通道 | \    |

#### 9.2.4 检测频率

| 参数     | 描述           | 备注 |
| -------- | -------------- | ---- |
| 检测频率 | 检测电压值频率 | 单位：秒    |

#### 9.2.5 警报间隔

| 参数     | 描述     | 备注 |
| -------- | -------- | ---- |
| 警报间隔 | 上报间隔 | 单位：秒    |

#### 9.2.6 上报方式

| 参数   | 描述                         | 备注 |
| ------ | ---------------------------- | ---- |
| 互联网 | 对应网络通道协议上报         | \    |
| 短信   | 对应预置信息白名单号发送短信 | \    |
| 电话   | 对应预置信息白名单号通话     | \    |

### 9.3 VBATT触发上报

#### 9.3.1 触发模式

| 参数     | 描述             | 备注 |
| -------- | ---------------- | ---- |
| 低于     | 低于多少电压上报 | 单位mv    |
| 高于     | 高于多少电压上报 | 单位mv    |
| 回差电压 | 间隔上次电压值   | 参考 实例-预警，单位mv    |

#### 9.3.2 上报消息

| 参数     | 描述                   | 备注 |
| -------- | ---------------------- | ---- |
| 上报消息 | 网络和短信上报所发消息 | 默认为字符串    |

详情请参考  实例-预警

#### 9.3.3 上报通道

| 参数     | 描述         | 备注 |
| -------- | ------------ | ---- |
| 上报通道 | 对应网络通道 | \    |

#### 9.3.4 检测频率

| 参数     | 描述           | 备注 |
| -------- | -------------- | ---- |
| 检测频率 | 检测电压值频率 | 单位：秒    |

#### 9.3.5 警报间隔

| 参数     | 描述     | 备注 |
| -------- | -------- | ---- |
| 警报间隔 | 上报间隔 | 单位：秒    |

#### 9.3.6 上报方式

| 参数   | 描述                         | 备注 |
| ------ | ---------------------------- | ---- |
| 互联网 | 对应网络通道协议上报         | \    |
| 短信   | 对应预置信息白名单号发送短信 | \    |
| 电话   | 对应预置信息白名单号通话     | \    |

## 10.任务

### 任务1

| 描述               | 备注                        |
| ------------------ | --------------------------- |
| 添加自己的额外脚本逻辑 | 格式为：function  用户自定义脚本  end |
